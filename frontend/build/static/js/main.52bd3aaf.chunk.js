(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{28:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),s=n(21),c=n.n(s),o=(n(28),n(12)),l=n(23),r=n(2),p=n(3),d=n(8),h=n(5),u=n(4),m=n.p+"static/media/logo.c2821b38.svg",b=n(6),j=n(0),f=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("img",{src:m,className:"header__image",alt:"\u043b\u043e\u0433\u043e \u043c\u0435\u0441\u0442\u043e"}),Object(j.jsxs)("div",{className:"header__wrapper",children:[this.props.children,Object(j.jsx)(o.b,{className:"header__link",to:"".concat(this.props.linkPath),onClick:this.props.onClick,children:this.props.linkText})]})]})}}]),n}(i.a.Component),O=Object(b.g)(f),g=n.p+"static/media/Vector.6c7bf054.svg",_=n.p+"static/media/Vector(1).bed8c136.svg",v=new(function(){function e(t){Object(r.a)(this,e),this._baseUrl=t.baseUrl,this.changeLikeCardStatus=this.changeLikeCardStatus.bind(this),this.deleteCardBind=this.deleteCard.bind(this)}return Object(p.a)(e,[{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._baseUrl,"/cards"),{credentials:"include"}).then((function(t){return e._check(t)}))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{credentials:"include"}).then(this._check)}},{key:"patchUserInfo",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",credentials:"include",body:JSON.stringify({name:e,about:t})}).then((function(e){return n._check(e)}))}},{key:"editAvatar",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",credentials:"include",body:JSON.stringify({avatar:e})}).then((function(e){return t._check(e)}))}},{key:"addCard",value:function(e,t){var n=this;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",credentials:"include",body:JSON.stringify({name:e,link:t})}).then((function(e){return n._check(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return t?fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",credentials:"include"}).then((function(e){return n._check(e)})):fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",credentials:"include"}).then((function(e){return n._check(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",credentials:"include"}).then((function(e){return t._check(e)}))}},{key:"_check",value:function(e){return e.ok?e.json():(console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)),Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}}]),e}())({baseUrl:"https://api.timofei.pustarnak.nomoredomains.icu"}),k=n.p+"static/media/Group.e3c42771.svg",C=i.a.createContext(),x=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleLikeClick=a.handleLikeClick.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"handleClick",value:function(){this.props.onCardClick(this.props.card.name,this.props.card.link)}},{key:"handleLikeClick",value:function(){this.props.onCardLike(this.props.card)}},{key:"handleDeleteClick",value:function(){this.props.onCardDelete(this.props.card)}},{key:"render",value:function(){for(var e=!1,t=0;t<this.props.card.likes.length;++t)this.props.card.likes[t]._id===this.context._id&&(e=!0);return Object(j.jsxs)("article",{className:"elements__element",children:[this.props.card.owner._id===this.context._id&&Object(j.jsx)("img",{src:k,className:"elements__delete",alt:"\u0443\u0434\u0430\u043b\u0438\u0442\u044c",onClick:this.handleDeleteClick.bind(this)}),Object(j.jsx)("img",{className:"elements__image",src:this.props.card.link,alt:this.props.card.name,onClick:this.handleClick.bind(this)}),Object(j.jsxs)("div",{className:"elements__group",children:[Object(j.jsx)("p",{className:"elements__title",children:this.props.card.name}),Object(j.jsxs)("div",{className:"elements__group-like",children:[Object(j.jsx)("div",{onClick:this.handleLikeClick,className:"elements__like ".concat(e&&"elements__like_active")}),Object(j.jsx)("p",{className:"elements__like-counter",children:this.props.card.likes.length})]})]})]})}}]),n}(i.a.Component);x.contextType=C;var y=x,N=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(j.jsx)("footer",{className:"footer",children:Object(j.jsx)("p",{className:"footer__copyright",children:"\xa92020 Mesto Russia"})})}}]),n}(i.a.Component),S=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).handleCardLike=a.handleCardLike.bind(Object(d.a)(a)),a.handleCardDelete=a.handleCardDelete.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"handleCardLike",value:function(e){this.props.handleCardLike(e)}},{key:"handleCardDelete",value:function(e){this.props.handleCardDelete(e)}},{key:"render",value:function(){var e=this;return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsxs)("section",{className:"profile",children:[Object(j.jsx)("img",{src:this.context.avatar,alt:"\u0430\u0432\u0430\u0442\u0430\u0440",className:"profile__avatar",onClick:this.props.onEditAvatar}),Object(j.jsx)("div",{className:"profile__avatar-edit"}),Object(j.jsxs)("div",{className:"profile__info",children:[Object(j.jsxs)("div",{className:"profile__edit",children:[Object(j.jsx)("h1",{className:"profile__title",children:this.context.name}),Object(j.jsx)("button",{className:"profile__edit-button",type:"button",onClick:this.props.onEditProfile,children:Object(j.jsx)("img",{src:g,alt:"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",className:"profile__edit-image"})})]}),Object(j.jsx)("p",{className:"profile__subtitle",children:this.context.about})]}),Object(j.jsx)("button",{className:"profile__add-button",type:"button",onClick:this.props.onAddPlace,children:Object(j.jsx)("img",{src:_,alt:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"profile__add-image"})})]}),Object(j.jsx)("section",{className:"elements",children:this.props.cards.map((function(t,n){return Object(j.jsx)(y,{card:t,onCardClick:e.props.handleCardClick,onCardLike:e.handleCardLike,onCardDelete:e.handleCardDelete},t._id)}))}),Object(j.jsx)(N,{})]})}}]),n}(i.a.Component);S.contextType=C;var P=S,L=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"popup ".concat(this.props.isOpen?"popup_opened":""," popup").concat(this.props.class),id:this.props.id,children:Object(j.jsxs)("form",{onSubmit:this.props.onSubmit,className:"popup__container ".concat(this.props.smallForm?"popup__container_small":""),method:"get",name:"card-link-&-title",noValidate:!0,children:[Object(j.jsx)("button",{className:"popup__close-button",type:"button",onClick:this.props.onClose,children:Object(j.jsx)("img",{src:_,alt:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-image"})}),Object(j.jsx)("h3",{className:"popup__title ".concat(this.props.additionalTitleClass),children:this.props.titleContent}),this.props.children,Object(j.jsx)("input",{type:"submit",className:"popup__submit-button",name:"submit-button",value:this.props.submitValue,id:this.props.submitId})]})})})}}]),n}(i.a.Component),A=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){return Object(r.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){return Object(j.jsx)("div",{className:"popup ".concat(this.props.data.isOpen?"popup_opened":""," popupImage"),id:"popup-image",children:Object(j.jsxs)("div",{className:"popup__case",children:[Object(j.jsx)("img",{className:"popup__image",src:this.props.data.link,alt:this.props.data.name}),Object(j.jsx)("button",{className:"popup__close-button",type:"button",children:Object(j.jsx)("img",{src:_,alt:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-image",onClick:this.props.onClose})}),Object(j.jsx)("h3",{className:"popup__image-title",children:this.props.data.name})]})})}}]),n}(i.a.Component),T=n(15),U="https://api.timofei.pustarnak.nomoredomains.icu",E=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(this.state.password,this.state.email),this.props.onLogin1(),this.props.onLogin(this.state.password,this.state.email)}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{className:"form",noValidate:!0,onSubmit:this.handleSubmit,children:[Object(j.jsx)("h1",{className:"form__title",children:"\u0412\u0445\u043e\u0434"}),Object(j.jsx)("input",{className:"form__input",type:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(j.jsx)("input",{className:"form__input",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:this.state.password,onChange:this.handleChange}),Object(j.jsx)("button",{className:"form__button",type:"submit",children:"\u0412\u043e\u0439\u0442\u0438"})]})})}}]),n}(i.a.Component),I=Object(b.g)(E),D=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(d.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(T.a)({},n,a))}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onRegister(this.state.password,this.state.email),this.props.goToSignIn()}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{className:"form",noValidate:!0,onSubmit:this.handleSubmit,children:[Object(j.jsx)("h1",{className:"form__title",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)("input",{className:"form__input",type:"email",placeholder:"Email",name:"email",value:this.state.email,onChange:this.handleChange}),Object(j.jsx)("input",{name:"password",className:"form__input",type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:this.state.password,onChange:this.handleChange}),Object(j.jsx)("button",{className:"form__button",type:"submit",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(j.jsx)(o.b,{className:"form__redirection",to:"/sign-in",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b? \u0412\u043e\u0439\u0442\u0438"})]})})}}]),n}(i.a.Component),w=Object(b.g)(D),F=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={name:"",description:""},a}return Object(p.a)(n,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log(3),this.props.onUpdateUser(this.state.name,this.state.description)}},{key:"componentDidMount",value:function(){this.setState({name:this.context.name}),this.setState({description:this.context.about})}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(L,{onSubmit:this.handleSubmit.bind(this),onClose:this.props.onClose,onOpen:this.props.onOpen,isOpen:this.props.isOpen,id:"popup-person",class:"Person",smallForm:!1,titleContent:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",additionalTitleClass:"",value:[this.state.name,this.state.description],submitValue:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",submitId:"popup-person-submit-button",children:[Object(j.jsxs)("div",{className:"popup__input-wrapper",children:[Object(j.jsx)("input",{type:"text",className:"popup__field popup__field_type_name",name:"name",id:"name-input",placeholder:"\u0418\u043c\u044f",required:!0,minLength:"2",maxLength:"40",value:this.state.name,onChange:this.handleChangeName.bind(this)}),Object(j.jsx)("span",{className:"popup__field-error",id:"name-input-error"})]}),Object(j.jsxs)("div",{className:"popup__input-wrapper",children:[Object(j.jsx)("input",{type:"text",className:"popup__field popup__field_type_description",id:"description-input",name:"description",placeholder:"\u041e \u0441\u0435\u0431\u0435",required:!0,minLength:"2",maxLength:"200",value:this.state.description,onChange:this.handleChangeDescription.bind(this)}),Object(j.jsx)("span",{className:"popup__field-error",id:"description-input-error"})]})]})})}}]),n}(i.a.Component);F.contextType=C;var V=F,J=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={link:""},a}return Object(p.a)(n,[{key:"handleChangeLink",value:function(e){this.setState({link:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onUpdateAvatar(this.state.link)}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)(L,{onSubmit:this.handleSubmit.bind(this),onClose:this.props.onClose,isOpen:this.props.isOpen,id:"popup-avatar",class:"EditAvatar",smallForm:!1,titleContent:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",additionalTitleClass:"",submitValue:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",submitId:"popup-edit-avatar-button",children:Object(j.jsxs)("div",{className:"popup__input-wrapper",children:[Object(j.jsx)("input",{value:this.state.link,type:"url",className:"popup__field popup__field_type_description",id:"link-input-edit",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:this.handleChangeLink.bind(this)}),Object(j.jsx)("span",{className:"popup__field-error",id:"link-input-edit-error"})]})})})}}]),n}(i.a.Component);J.contextType=C;var R=J,q=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={name:"",link:""},a}return Object(p.a)(n,[{key:"handleChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"handleChangeLink",value:function(e){this.setState({link:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onAddCard(this.state.name,this.state.link)}},{key:"handleAddPlaceSubmit",value:function(e){e.preventDefault()}},{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)(L,{onSubmit:this.handleSubmit.bind(this),onClose:this.props.onClose,onOpen:this.props.onOpen,isOpen:this.props.isOpen,id:"popup-card",class:"AddCard",smallForm:!1,titleContent:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",additionalTitleClass:"",submitValue:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",submitId:"popup-addCard-button",children:[Object(j.jsxs)("div",{className:"popup__input-wrapper",children:[Object(j.jsx)("input",{type:"text",className:"popup__field popup__field_type_name",name:"title",id:"title-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"2",maxLength:"30",value:this.state.name,onChange:this.handleChangeName.bind(this)}),Object(j.jsx)("span",{className:"popup__field-error",id:"title-input-error"})]}),Object(j.jsxs)("div",{className:"popup__input-wrapper",children:[Object(j.jsx)("input",{type:"url",className:"popup__field popup__field_type_description",id:"link-input",name:"link",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,maxLength:"3000",value:this.state.link,onChange:this.handleChangeLink.bind(this)}),Object(j.jsx)("span",{className:"popup__field-error",id:"link-input-error"})]})]})})}}]),n}(i.a.Component);var B=function(e){return Object(j.jsx)(b.b,{children:e.loggedIn?e.children:Object(j.jsx)(b.a,{to:"/sign-in"})})},M=n.p+"static/media/Union.1b6082f8.svg",G=n.p+"static/media/Union(1).df8eddf6.svg",H=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"popup ".concat(this.props.isOpen?"popup_opened":""),children:Object(j.jsxs)("div",{className:"popup__container",children:[Object(j.jsx)("button",{className:"popup__close-button",type:"button",onClick:this.props.onClose,children:Object(j.jsx)("img",{src:_,alt:"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",className:"popup__close-image"})}),Object(j.jsx)("img",{alt:this.props.success?"\u0443\u0441\u043f\u0435\u0445":"\u043d\u0435\u0443\u0434\u0430\u0447\u0430",src:this.props.success?M:G,className:"popup__union"}),Object(j.jsx)("p",{className:"popup__message",children:this.props.success?"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!":"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437."})]})})})}}]),n}(i.a.Component),z=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(r.a)(this,n),(a=t.call(this,e)).state={isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isEditAvatarPopupOpen:!1,isInfoToolTipOpen:!1,selectedCard:{isOpen:!1,link:"",name:""},currentUser:!1,loggedIn:!1,cards:[],email:""},a.handleEmail=a.handleEmail.bind(Object(d.a)(a)),a}return Object(p.a)(n,[{key:"handleRegistrationClick",value:function(){this.setState({isInfoToolTipOpen:!0})}},{key:"handleEditAvatarClick",value:function(){this.setState({isEditAvatarPopupOpen:!0})}},{key:"handleEditProfileClick",value:function(){this.setState({isEditProfilePopupOpen:!0})}},{key:"handleAddPlaceClick",value:function(){this.setState({isAddPlacePopupOpen:!0})}},{key:"handleCardClick",value:function(e,t){this.setState({selectedCard:{isOpen:!0,link:t,name:e}})}},{key:"handleUpdateUser",value:function(e,t){var n=this;console.log(e),console.log(t),v.patchUserInfo(e,t).then((function(e){console.log("patchUserInfo",e),n.setState({currentUser:e}),n.closeAllPopups()})).catch((function(e){console.log(e)}))}},{key:"handleUpdateAvatar",value:function(e){var t=this;console.log(e),v.editAvatar(e).then((function(e){t.setState({currentUser:e}),t.closeAllPopups()})).catch((function(e){console.log(e)}))}},{key:"closeAllPopups",value:function(){this.setState({isEditAvatarPopupOpen:!1,isEditProfilePopupOpen:!1,isAddPlacePopupOpen:!1,isInfoToolTipOpen:!1,selectedCard:{isOpen:!1}})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("jwt");t&&(function(e){return fetch("".concat(U,"/users/me"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))})).then((function(e){return e}))}(t).then((function(t){console.log(t,1e3),t&&(e.handleEmail(t.data.email),e.handleLogin(),e.props.history.push("/"),console.log(t.data.email))})).catch((function(e){return console.log(e)})),this.setState({loggedIn:!0}),v.getUserInfo().then((function(t){e.setState({currentUser:t})})).catch((function(e){console.log(e)})),v.getInitialCards().then((function(t){e.setState({cards:t})})).catch((function(e){console.log(e)})))}},{key:"handleEmail",value:function(e){this.setState({email:e})}},{key:"goToSignIn",value:function(){this.props.history.push("/sign-in")}},{key:"authLogin",value:function(e,t){var n=this;(function(e,t){return fetch("".concat(U,"/signin"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){return e.json()})).then((function(e){return e}))})(e,t).then((function(e){e?(n.setState({currentUser:e}),v.getInitialCards().then((function(e){n.setState({cards:e})})).catch((function(e){console.log(e)})),n.setState({message:""},(function(){n.handleLogin(),n.props.history.push("/")})),n.handleEmail(n.state.email)):n.setState({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"})}))}},{key:"authRegister",value:function(e,t){var n=this;(function(e,t){return fetch("".concat(U,"/signup"),{method:"POST",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({password:e,email:t})}).then((function(e){try{if(201===e.status)return e.json()}catch(t){return t}})).then((function(e){return e})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e?n.setState({message:""},(function(){n.props.history.push("/log-in")})):n.setState({message:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!"})}))}},{key:"handleCardLike",value:function(e){for(var t=this,n=!1,a=0;a<e.likes.length;++a)e.likes[a]._id===this.state.currentUser._id&&(n=!0);v.changeLikeCardStatus(e._id,!n).then((function(n){var a=t.state.cards.map((function(t){return t._id===e._id?n:t}));t.setState({cards:a})})).catch((function(e){console.log(e)}))}},{key:"handleCardDelete",value:function(e){var t=this;v.deleteCard(e._id).then((function(n){var a=t.state.cards.filter((function(t){return t._id!==e._id}));t.setState({cards:a})})).catch((function(e){console.log(e)}))}},{key:"handleAddCard",value:function(e,t){var n=this;v.addCard(e,t).then((function(e){n.setState({cards:[e].concat(Object(l.a)(n.state.cards))}),n.closeAllPopups()})).catch((function(e){console.log(e)}))}},{key:"handleLogin",value:function(){this.setState({loggedIn:!0})}},{key:"handleLogout",value:function(){this.setState({loggedIn:!1}),localStorage.removeItem("jwt")}},{key:"render",value:function(){return Object(j.jsx)(C.Provider,{value:this.state.currentUser,children:Object(j.jsx)("div",{className:"page",children:Object(j.jsxs)(b.d,{children:[Object(j.jsxs)(b.b,{path:"/sign-up",children:[Object(j.jsx)(O,{linkPath:"/sign-in",linkText:"\u0412\u043e\u0439\u0442\u0438"}),Object(j.jsx)(w,{onRegister:this.authRegister.bind(this),goToSignIn:this.goToSignIn.bind(this)})]}),Object(j.jsxs)(b.b,{path:"/sign-in",children:[Object(j.jsx)(O,{linkPath:"/sign-up",linkText:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(j.jsx)(I,{onLogin1:this.handleLogin.bind(this),handleEmail:this.handleEmail,onLogin:this.authLogin.bind(this)})]}),Object(j.jsxs)(B,{path:"/",loggedIn:this.state.loggedIn,children:[Object(j.jsx)(O,{linkPath:"/sign-in",linkText:"\u0412\u044b\u0445\u043e\u0434",onClick:this.handleLogout.bind(this),children:Object(j.jsx)("p",{className:"header__email",children:this.state.email})}),Object(j.jsx)(P,{handleCardLike:this.handleCardLike.bind(this),handleCardDelete:this.handleCardDelete.bind(this),cards:this.state.cards,onEditProfile:this.handleEditProfileClick.bind(this),onAddPlace:this.handleAddPlaceClick.bind(this),onEditAvatar:this.handleEditAvatarClick.bind(this),handleCardClick:this.handleCardClick.bind(this)}),Object(j.jsx)(A,{data:this.state.selectedCard,onClose:this.closeAllPopups.bind(this)}),Object(j.jsx)(R,{onUpdateAvatar:this.handleUpdateAvatar.bind(this),onClose:this.closeAllPopups.bind(this),isOpen:this.state.isEditAvatarPopupOpen}),Object(j.jsx)(q,{onAddCard:this.handleAddCard.bind(this),onOpen:this.handleAddPlaceClick.bind(this),onClose:this.closeAllPopups.bind(this),isOpen:this.state.isAddPlacePopupOpen}),Object(j.jsx)(V,{onUpdateUser:this.handleUpdateUser.bind(this),onOpen:this.handleEditProfileClick.bind(this),onClose:this.closeAllPopups.bind(this),isOpen:this.state.isEditProfilePopupOpen}),Object(j.jsx)(L,{value:[],onClose:this.closeAllPopups.bind(this),isOpen:!1,id:"popup-close",class:"Confirm",smallForm:!0,titleContent:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",additionalTitleClass:"popup__title_popup-close",fieldsData:[],submitValue:"\u0414\u0430",submitId:"popup-confirm-button"}),Object(j.jsx)(H,{success:!0,onClose:this.closeAllPopups.bind(this),isOpen:this.state.isInfoToolTipOpen})]})]})})})}}]),n}(i.a.Component),K=Object(b.g)(z),Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,36)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),s(e),c(e)}))};c.a.render(Object(j.jsx)(i.a.StrictMode,{children:Object(j.jsx)(o.a,{children:Object(j.jsx)(K,{})})}),document.getElementById("root")),Q()}},[[35,1,2]]]);
//# sourceMappingURL=main.52bd3aaf.chunk.js.map